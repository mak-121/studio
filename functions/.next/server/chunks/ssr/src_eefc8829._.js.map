{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,kKAAA,CAAA,OAAmB;AAEjC,MAAM,eAAe,kKAAA,CAAA,UAAsB;AAE3C,MAAM,aAAa,kKAAA,CAAA,QAAoB;AAEvC,MAAM,cAAc,kKAAA,CAAA,SAAqB;AAEzC,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAsB;QACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAsB;gBACrB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,kKAAA,CAAA,QAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,kKAAA,CAAA,cAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\n'use server';\n\nimport Handlebars from 'handlebars';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport os from 'os';\n\n// Custom function to convert number to words in Indian format\nconst amountToWords = (amount: number): string => {\n  const ones = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];\n  const teens = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];\n  const tens = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];\n\n  const convertLessThanThousand = (num: number): string => {\n    if (num === 0) return '';\n    if (num < 10) return ones[num];\n    if (num < 20) return teens[num - 10];\n    if (num < 100) return tens[Math.floor(num / 10)] + (num % 10 !== 0 ? ' ' + ones[num % 10] : '');\n    return ones[Math.floor(num / 100)] + ' hundred' + (num % 100 !== 0 ? ' ' + convertLessThanThousand(num % 100) : '');\n  };\n\n  if (amount === 0) return 'Zero';\n\n  const crores = Math.floor(amount / 10000000);\n  const lakhs = Math.floor((amount % 10000000) / 100000);\n  const thousands = Math.floor((amount % 100000) / 1000);\n  const hundreds = Math.floor(amount % 1000);\n\n  let words = '';\n  if (crores > 0) words += convertLessThanThousand(crores) + ' crore ';\n  if (lakhs > 0) words += convertLessThanThousand(lakhs) + ' lakh ';\n  if (thousands > 0) words += convertLessThanThousand(thousands) + ' thousand ';\n  if (hundreds > 0) words += convertLessThanThousand(hundreds);\n\n  return words.trim().replace(/\\s+/g, ' ');\n};\n\n\nconst receiptTemplateHtml = `<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Receipt</title>\n    <style>\n  @page {\n    size: A4;\n    margin: 20px; /* Reduced page margin */\n  }\n  body {\n    font-family: Arial, sans-serif;\n    font-size: 11px; /* Slightly smaller font for better fit */\n    color: #000;\n  }\n  /* --- Layout & Spacing --- */\n  .receipt-container {\n      page-break-inside: avoid;\n  }\n  .receipt {\n    page-break-inside: avoid;\n    padding-bottom: 10px;\n  }\n  .receipt.original {\n    border-bottom: 2px dashed #000;\n    margin-bottom: 10px; /* Reduced space between receipts */\n  }\n  .box {\n    border: 1px solid #000;\n    padding: 10px;\n    margin-top: 8px;\n  }\n  header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 5px;\n  }\n  footer {\n    margin-top: 15px; /* Reduced footer margin */\n    font-size: 9px;\n    line-height: 1.4;\n  }\n  /* --- Typography --- */\n  header .right {\n    font-weight: bold;\n  }\n  .title {\n    text-align: center;\n    font-size: 18px;\n    font-weight: 700;\n    margin-top: 5px;\n  }\n  .subtitle {\n    text-align: center;\n    font-size: 13px;\n    margin-top: 2px;\n  }\n  .desc {\n    margin-top: 8px;\n    line-height: 1.5;\n    text-align: left; /* Use left-align to avoid bad spacing */\n  }\n  /* --- Tables & Signature --- */\n  .summary-container {\n    width: 100%;\n    margin-top: 5px;\n  }\n  .summary {\n    border-collapse: collapse;\n  }\n  .summary th,\n  .summary td {\n    border: 1px solid #000;\n    padding: 5px; /* Reduced cell padding */\n    text-align: left;\n  }\n  .summary th {\n    background: #f2f2f2;\n    font-weight: 700;\n  }\n  .right-align {\n    text-align: right;\n  }\n  .signature-box {\n    text-align: center;\n    vertical-align: top;\n    padding-left: 20px;\n  }\n  .signature-frame {\n    border: 1px solid black;\n    width: 120px;\n    height: 50px;\n    margin: 5px auto;\n  }\n  .logo img {\n    width: 130px;\n  }\n</style>\n  </head>\n  <body>\n    <div class=\"receipt-container\">\n      <!-- ORIGINAL -->\n      <div class=\"content receipt original\">\n        <header>\n          <div class=\"logo\">\n            <img src=\"/logo.png\" alt=\"logo\" />\n          </div>\n          <div class=\"right\">Original</div>\n        </header>\n\n        <div class=\"title\">KP ENTERPRISE</div>\n        <div class=\"subtitle\">\"SANSKRUTI PRIDE\"</div>\n        <div style=\"text-align: center; font-size: 10px; margin-top: 4px\">\n          Sur. No.726, FP-27/1, TP-415, Nr. Raslila Party Plot Kathwada,\n          Ahmedabad:382430\n        </div>\n\n        <div\n          style=\"\n            text-align: center;\n            margin-top: 10px;\n            font-weight: 700;\n            font-size: 16px;\n          \"\n        >\n          \"RECEIPT\"\n        </div>\n\n        <div class=\"box\">\n          <table style=\"width: 100%\">\n            <tr>\n              <td style=\"font-weight: 700\">Receipt No.: {{ receipt_no }}</td>\n              <td style=\"text-align: right; font-weight: 700\">\n                Date: {{ date }}\n              </td>\n            </tr>\n          </table>\n\n          <div class=\"desc\">\n            Received with thanks, from <b class=\"form_data\">{{ name }}</b>  ,towards booking of\n            <b class=\"form_data\">{{ plot }}</b> of Project - Sanskruti Pride with sums of Rs.\n            <b class=\"form_data\">{{ amount_formatted }}</b>/- (In words:<b>Rupees {{ amount_words }} only</b>) by\n            <b>{{ payment_mode }}</b> \n            {{#if (ne payment_mode \"Cash\")}}\n            drawn on Bank: <b class=\"form_data\">{{ bank }}</b> Branch:\n            <b class=\"form_data\">{{ branch }}</b> through <b>{{ payment_mode }}</b> No.\n            <b>{{ cheque_no }}.</b>\n              {{else}}\n              .\n            {{/if}}\n          </div>\n          <br />\n          <div>Summary to Amount received as above towards</div>\n\n          <table style=\"width: 100%\">\n            <tr class=\"no-break-row\">\n              <!-- Table with amounts -->\n              <td>\n                <table class=\"summary\">\n                  <tr>\n                    <th>Particulars</th>\n                    <th>Amount Rs.</th>\n                  </tr>\n                  <tr>\n                    <td>Sales Consideration</td>\n                    <td class=\"right-align\">{{ sales_amount_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Extra Work</td>\n                    <td class=\"right-align\">{{ extra_work_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Other Receipts</td>\n                    <td class=\"right-align\">{{ other_receipts_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td style=\"font-weight: 700\">Total Amount</td>\n                    <td style=\"font-weight: 700\" class=\"right-align\">\n                      {{ total_amount_formatted }}\n                    </td>\n                  </tr>\n                </table>\n              </td>\n              <td class=\"signature-box\">\n                For, KP ENTERPRISE\n                <div class=\"signature-frame\"></div>\n                Authorized Signatory / Partner\n              </td>\n            </tr>\n          </table>\n          <br>\n          <b><u>Amount in Words: Rupees {{ amount_words }} only</u></b>\n\n          <div style=\"clear: both\"></div>\n        </div>\n\n        <footer>\n          <div>\n            1) Subject to realisation of Cheque / NEFT / RTGS / Online payments\n          </div>\n          <div>2) Subject to Ahmedabad Jurisdiction</div>\n          <div>GST Reg. No.: 24AAYFK8118R1ZA</div>\n          <div>\n            RERA Reg.No.: PR/GJ/AHMEDABAD/AHMEDABAD CITY/AUDA/MAA12405/101023\n          </div>\n        </footer>\n      </div>\n\n      <!-- DUPLICATE -->\n      <div class=\"content receipt\">\n        <header>\n          <div class=\"logo\">\n            <img src=\"/logo.png\" alt=\"logo\" />\n          </div>\n          <div class=\"right\">Duplicate</div>\n        </header>\n\n        <div class=\"title\">KP ENTERPRISE</div>\n        <div class=\"subtitle\">\"SANSKRUTI PRIDE\"</div>\n        <div style=\"text-align: center; font-size: 10px; margin-top: 4px\">\n          Sur. No.726, FP-27/1, TP-415, Nr. Raslila Party Plot Kathwada,\n          Ahmedabad:382430\n        </div>\n\n        <div\n          style=\"\n            text-align: center;\n            margin-top: 10px;\n            font-weight: 700;\n            font-size: 16px;\n          \"\n        >\n          \"RECEIPT\"\n        </div>\n\n        <div class=\"box\">\n          <table style=\"width: 100%\">\n            <tr>\n              <td style=\"font-weight: 700\">Receipt No.: {{ receipt_no }}</td>\n              <td style=\"text-align: right; font-weight: 700\">\n                Date: {{ date }}\n              </td>\n            </tr>\n          </table>\n\n          <div class=\"desc\">\n           Received with thanks, from <b class=\"form_data\">{{ name }}</b>  ,towards booking of\n            <b class=\"form_data\">{{ plot }}</b> of Project - Sanskruti Pride with sums of Rs.\n            <b class=\"form_data\">{{ amount_formatted }}</b>/- (In words: <b>Rupees {{ amount_words }} only</b>) by\n            <b>{{ payment_mode }}</b> \n            {{#if (ne payment_mode \"Cash\")}}\n            drawn on Bank: <b class=\"form_data\">{{ bank }}</b> Branch:\n            <b class=\"form_data\">{{ branch }}</b> through <b>{{ payment_mode }}</b> No.\n            <b>{{ cheque_no }}.</b>\n              {{else}}\n              .\n            {{/if}}\n          </div>\n          <br />\n          <div>Summary to Amount received as above towards</div>\n\n          <table style=\"width: 100%\">\n            <tr class=\"no-break-row\">\n              <!-- Table with amounts -->\n              <td>\n                <table class=\"summary\">\n                  <tr>\n                    <th>Particulars</th>\n                    <th>Amount Rs.</th>\n                  </tr>\n                  <tr>\n                    <td>Sales Consideration</td>\n                    <td class=\"right-align\">{{ sales_amount_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Extra Work</td>\n                    <td class=\"right-align\">{{ extra_work_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Other Receipts</td>\n                    <td class=\"right-align\">{{ other_receipts_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td style=\"font-weight: 700\">Total Amount</td>\n                    <td style=\"font-weight: 700\" class=\"right-align\">\n                      {{ total_amount_formatted }}\n                    </td>\n                  </tr>\n                </table>\n              </td>\n              <td class=\"signature-box\">\n                For, KP ENTERPRISE\n                <div class=\"signature-frame\"></div>\n                Authorized Signatory / Partner\n              </td>\n            </tr>\n          </table>\n          <br>\n          <b>Amount in Words: Rupees {{ amount_words }} only</b>\n\n          <div style=\"clear: both\"></div>\n        </div>\n\n        <footer>\n          <div>\n            1) Subject to realisation of Cheque / NEFT / RTGS / Online payments\n          </div>\n          <div>2) Subject to Ahmedabad Jurisdiction</div>\n          <div>GST Reg. No.: 24AAYFK8118R1ZA</div>\n          <div>\n            RERA Reg.No.: PR/GJ/AHMEDABAD/AHMEDABAD CITY/AUDA/MAA12405/101023\n          </div>\n        </footer>\n      </div>\n    </div>\n  </body>\n</html>\n`;\n\nconst formatNumber = (num: number) => new Intl.NumberFormat('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(num);\n\nconst formatDate = (dateString: string) => {\n    try {\n        const [year, month, day] = dateString.split('-');\n        if (!year || !month || !day) return dateString;\n        return `${day}-${month}-${year}`;\n    } catch (e) {\n        return dateString;\n    }\n};\n\nHandlebars.registerHelper('ne', function (a, b) {\n  return a !== b;\n});\n\nexport async function generatePdfAction(formData: any) {\n  try {\n    const template = Handlebars.compile(receiptTemplateHtml);\n\n    const total = Number(formData.amount) || 0;\n    const salesAmount = Number(formData.sales_amount) || 0;\n    const extraWork = Number(formData.extra_work) || 0;\n    const otherReceipts = Number(formData.other_receipts) || 0;\n    \n    const integerPart = Math.floor(total);\n    const decimalPart = Math.round((total - integerPart) * 100);\n\n    let finalWords = amountToWords(integerPart);\n    if (decimalPart > 0) {\n      finalWords += ' and ' + amountToWords(decimalPart) + ' paise';\n    }\n\n\n    const templateData = {\n        ...formData,\n        date: formatDate(formData.date),\n        amount_formatted: formatNumber(total),\n        amount_words: finalWords.replace(/\\b\\w/g, (l: string) => l.toUpperCase()),\n        sales_amount_formatted: formatNumber(salesAmount),\n        extra_work_formatted: extraWork === 0 ? '-' : formatNumber(extraWork),\n        other_receipts_formatted: otherReceipts === 0 ? '-' : formatNumber(otherReceipts),\n        total_amount_formatted: formatNumber(total),\n    };\n\n    const html = template(templateData);\n    \n    return { success: true, data: html };\n  } catch (error: any) {\n    console.error('HTML generation failed:', error);\n    return { success: false, error: `Failed to generate HTML: ${error.message}` };\n  }\n}\n\nconst CSV_FILE_PATH = path.join(os.tmpdir(), 'receipt_log.csv');\nconst CSV_HEADERS = [\n    'receipt_no', 'date', 'name', 'plot',\n    'payment_mode', 'bank', 'branch', 'cheque_no',\n    'sales_amount', 'extra_work', 'other_receipts', 'amount'\n];\n\nfunction sanitizeCsvValue(value: any): string {\n    const str = String(value ?? '');\n    if (str.includes(',') || str.includes('\"') || str.includes('\\n')) {\n        return `\"${str.replace(/\"/g, '\"\"')}\"`;\n    }\n    return str;\n}\n\nexport async function recordToCsvAction(formData: any) {\n  try {\n    const csvRow = CSV_HEADERS.map(header => sanitizeCsvValue(formData[header])).join(',');\n\n    try {\n      // Check if file exists, if not, create it with a header\n      await fs.access(CSV_FILE_PATH);\n    } catch {\n      const headerRow = CSV_HEADERS.join(',');\n      await fs.writeFile(CSV_FILE_PATH, headerRow + '\\n', 'utf-8');\n    }\n\n    // Append new row\n    await fs.appendFile(CSV_FILE_PATH, csvRow + '\\n', 'utf-8');\n    \n    return { success: true };\n  } catch (error: any) {\n    console.error('CSV writing failed:', error);\n    return { success: false, error: `Failed to write to CSV: ${error.message}` };\n  }\n}\n\n\nexport async function downloadCsvAction() {\n    try {\n        await fs.access(CSV_FILE_PATH);\n        const fileContent = await fs.readFile(CSV_FILE_PATH, 'utf-8');\n        return { success: true, data: fileContent };\n    } catch (error: any) {\n        if (error.code === 'ENOENT') {\n            return { success: false, error: \"Log file does not exist yet. Please generate a receipt first.\" };\n        }\n        console.error('CSV reading failed:', error);\n        return { success: false, error: `Failed to read CSV file: ${error.message}` };\n    }\n}\n"],"names":[],"mappings":";;;;;;IAmcsB,oBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ledger-flow/header.tsx"],"sourcesContent":["\n'use client';\nimport { BookMarked, FileDown, Loader2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { downloadCsvAction } from '@/app/actions';\nimport { useToast } from '@/hooks/use-toast';\nimport React from 'react';\n\nexport function Header() {\n  const { toast } = useToast();\n  const [isDownloading, setIsDownloading] = React.useState(false);\n\n  const handleDownload = async () => {\n    setIsDownloading(true);\n    const result = await downloadCsvAction();\n\n    if (result.success && result.data) {\n      try {\n        const blob = new Blob([result.data], { type: 'text/csv;charset=utf-8;' });\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.download = \"receipt_log.csv\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        toast({ title: 'Success', description: 'Receipt log downloaded.' });\n      } catch (e: any) {\n        toast({ variant: 'destructive', title: 'Download Error', description: `Failed to prepare file for download: ${e.message}` });\n      }\n    } else {\n      toast({ variant: 'destructive', title: 'Download Failed', description: result.error });\n    }\n    setIsDownloading(false);\n  };\n\n  return (\n    <header className=\"p-4 border-b bg-card/50 backdrop-blur-sm sticky top-0 z-10 flex items-center justify-between gap-4\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"p-2 bg-primary/10 rounded-lg\">\n          <BookMarked className=\"h-6 w-6 text-primary\" />\n        </div>\n        <h1 className=\"text-2xl font-bold text-foreground\">\n          LedgerFlow\n        </h1>\n      </div>\n      <Button onClick={handleDownload} disabled={isDownloading}>\n        {isDownloading ? (\n          <>\n            <Loader2 className=\"animate-spin\" />\n            Downloading...\n          </>\n        ) : (\n          <>\n            <FileDown />\n            Download Log\n          </>\n        )}\n      </Button>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,CAAC,eAAe,iBAAiB,GAAG,qMAAA,CAAA,UAAK,CAAC,QAAQ,CAAC;IAEzD,MAAM,iBAAiB;QACrB,iBAAiB;QACjB,MAAM,SAAS,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD;QAErC,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;YACjC,IAAI;gBACF,MAAM,OAAO,IAAI,KAAK;oBAAC,OAAO,IAAI;iBAAC,EAAE;oBAAE,MAAM;gBAA0B;gBACvE,MAAM,OAAO,SAAS,aAAa,CAAC;gBACpC,KAAK,IAAI,GAAG,IAAI,eAAe,CAAC;gBAChC,KAAK,QAAQ,GAAG;gBAChB,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC1B,KAAK,KAAK;gBACV,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC1B,MAAM;oBAAE,OAAO;oBAAW,aAAa;gBAA0B;YACnE,EAAE,OAAO,GAAQ;gBACf,MAAM;oBAAE,SAAS;oBAAe,OAAO;oBAAkB,aAAa,CAAC,qCAAqC,EAAE,EAAE,OAAO,EAAE;gBAAC;YAC5H;QACF,OAAO;YACL,MAAM;gBAAE,SAAS;gBAAe,OAAO;gBAAmB,aAAa,OAAO,KAAK;YAAC;QACtF;QACA,iBAAiB;IACnB;IAEA,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,kNAAA,CAAA,aAAU;4BAAC,WAAU;;;;;;;;;;;kCAExB,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;;;;;;;0BAIrD,8OAAC,kIAAA,CAAA,SAAM;gBAAC,SAAS;gBAAgB,UAAU;0BACxC,8BACC;;sCACE,8OAAC,iNAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;wBAAiB;;iDAItC;;sCACE,8OAAC,8MAAA,CAAA,WAAQ;;;;;wBAAG;;;;;;;;;;;;;;AAOxB","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\n'use server';\n\nimport Handlebars from 'handlebars';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport os from 'os';\n\n// Custom function to convert number to words in Indian format\nconst amountToWords = (amount: number): string => {\n  const ones = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];\n  const teens = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];\n  const tens = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];\n\n  const convertLessThanThousand = (num: number): string => {\n    if (num === 0) return '';\n    if (num < 10) return ones[num];\n    if (num < 20) return teens[num - 10];\n    if (num < 100) return tens[Math.floor(num / 10)] + (num % 10 !== 0 ? ' ' + ones[num % 10] : '');\n    return ones[Math.floor(num / 100)] + ' hundred' + (num % 100 !== 0 ? ' ' + convertLessThanThousand(num % 100) : '');\n  };\n\n  if (amount === 0) return 'Zero';\n\n  const crores = Math.floor(amount / 10000000);\n  const lakhs = Math.floor((amount % 10000000) / 100000);\n  const thousands = Math.floor((amount % 100000) / 1000);\n  const hundreds = Math.floor(amount % 1000);\n\n  let words = '';\n  if (crores > 0) words += convertLessThanThousand(crores) + ' crore ';\n  if (lakhs > 0) words += convertLessThanThousand(lakhs) + ' lakh ';\n  if (thousands > 0) words += convertLessThanThousand(thousands) + ' thousand ';\n  if (hundreds > 0) words += convertLessThanThousand(hundreds);\n\n  return words.trim().replace(/\\s+/g, ' ');\n};\n\n\nconst receiptTemplateHtml = `<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Receipt</title>\n    <style>\n  @page {\n    size: A4;\n    margin: 20px; /* Reduced page margin */\n  }\n  body {\n    font-family: Arial, sans-serif;\n    font-size: 11px; /* Slightly smaller font for better fit */\n    color: #000;\n  }\n  /* --- Layout & Spacing --- */\n  .receipt-container {\n      page-break-inside: avoid;\n  }\n  .receipt {\n    page-break-inside: avoid;\n    padding-bottom: 10px;\n  }\n  .receipt.original {\n    border-bottom: 2px dashed #000;\n    margin-bottom: 10px; /* Reduced space between receipts */\n  }\n  .box {\n    border: 1px solid #000;\n    padding: 10px;\n    margin-top: 8px;\n  }\n  header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 5px;\n  }\n  footer {\n    margin-top: 15px; /* Reduced footer margin */\n    font-size: 9px;\n    line-height: 1.4;\n  }\n  /* --- Typography --- */\n  header .right {\n    font-weight: bold;\n  }\n  .title {\n    text-align: center;\n    font-size: 18px;\n    font-weight: 700;\n    margin-top: 5px;\n  }\n  .subtitle {\n    text-align: center;\n    font-size: 13px;\n    margin-top: 2px;\n  }\n  .desc {\n    margin-top: 8px;\n    line-height: 1.5;\n    text-align: left; /* Use left-align to avoid bad spacing */\n  }\n  /* --- Tables & Signature --- */\n  .summary-container {\n    width: 100%;\n    margin-top: 5px;\n  }\n  .summary {\n    border-collapse: collapse;\n  }\n  .summary th,\n  .summary td {\n    border: 1px solid #000;\n    padding: 5px; /* Reduced cell padding */\n    text-align: left;\n  }\n  .summary th {\n    background: #f2f2f2;\n    font-weight: 700;\n  }\n  .right-align {\n    text-align: right;\n  }\n  .signature-box {\n    text-align: center;\n    vertical-align: top;\n    padding-left: 20px;\n  }\n  .signature-frame {\n    border: 1px solid black;\n    width: 120px;\n    height: 50px;\n    margin: 5px auto;\n  }\n  .logo img {\n    width: 130px;\n  }\n</style>\n  </head>\n  <body>\n    <div class=\"receipt-container\">\n      <!-- ORIGINAL -->\n      <div class=\"content receipt original\">\n        <header>\n          <div class=\"logo\">\n            <img src=\"/logo.png\" alt=\"logo\" />\n          </div>\n          <div class=\"right\">Original</div>\n        </header>\n\n        <div class=\"title\">KP ENTERPRISE</div>\n        <div class=\"subtitle\">\"SANSKRUTI PRIDE\"</div>\n        <div style=\"text-align: center; font-size: 10px; margin-top: 4px\">\n          Sur. No.726, FP-27/1, TP-415, Nr. Raslila Party Plot Kathwada,\n          Ahmedabad:382430\n        </div>\n\n        <div\n          style=\"\n            text-align: center;\n            margin-top: 10px;\n            font-weight: 700;\n            font-size: 16px;\n          \"\n        >\n          \"RECEIPT\"\n        </div>\n\n        <div class=\"box\">\n          <table style=\"width: 100%\">\n            <tr>\n              <td style=\"font-weight: 700\">Receipt No.: {{ receipt_no }}</td>\n              <td style=\"text-align: right; font-weight: 700\">\n                Date: {{ date }}\n              </td>\n            </tr>\n          </table>\n\n          <div class=\"desc\">\n            Received with thanks, from <b class=\"form_data\">{{ name }}</b>  ,towards booking of\n            <b class=\"form_data\">{{ plot }}</b> of Project - Sanskruti Pride with sums of Rs.\n            <b class=\"form_data\">{{ amount_formatted }}</b>/- (In words:<b>Rupees {{ amount_words }} only</b>) by\n            <b>{{ payment_mode }}</b> \n            {{#if (ne payment_mode \"Cash\")}}\n            drawn on Bank: <b class=\"form_data\">{{ bank }}</b> Branch:\n            <b class=\"form_data\">{{ branch }}</b> through <b>{{ payment_mode }}</b> No.\n            <b>{{ cheque_no }}.</b>\n              {{else}}\n              .\n            {{/if}}\n          </div>\n          <br />\n          <div>Summary to Amount received as above towards</div>\n\n          <table style=\"width: 100%\">\n            <tr class=\"no-break-row\">\n              <!-- Table with amounts -->\n              <td>\n                <table class=\"summary\">\n                  <tr>\n                    <th>Particulars</th>\n                    <th>Amount Rs.</th>\n                  </tr>\n                  <tr>\n                    <td>Sales Consideration</td>\n                    <td class=\"right-align\">{{ sales_amount_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Extra Work</td>\n                    <td class=\"right-align\">{{ extra_work_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Other Receipts</td>\n                    <td class=\"right-align\">{{ other_receipts_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td style=\"font-weight: 700\">Total Amount</td>\n                    <td style=\"font-weight: 700\" class=\"right-align\">\n                      {{ total_amount_formatted }}\n                    </td>\n                  </tr>\n                </table>\n              </td>\n              <td class=\"signature-box\">\n                For, KP ENTERPRISE\n                <div class=\"signature-frame\"></div>\n                Authorized Signatory / Partner\n              </td>\n            </tr>\n          </table>\n          <br>\n          <b><u>Amount in Words: Rupees {{ amount_words }} only</u></b>\n\n          <div style=\"clear: both\"></div>\n        </div>\n\n        <footer>\n          <div>\n            1) Subject to realisation of Cheque / NEFT / RTGS / Online payments\n          </div>\n          <div>2) Subject to Ahmedabad Jurisdiction</div>\n          <div>GST Reg. No.: 24AAYFK8118R1ZA</div>\n          <div>\n            RERA Reg.No.: PR/GJ/AHMEDABAD/AHMEDABAD CITY/AUDA/MAA12405/101023\n          </div>\n        </footer>\n      </div>\n\n      <!-- DUPLICATE -->\n      <div class=\"content receipt\">\n        <header>\n          <div class=\"logo\">\n            <img src=\"/logo.png\" alt=\"logo\" />\n          </div>\n          <div class=\"right\">Duplicate</div>\n        </header>\n\n        <div class=\"title\">KP ENTERPRISE</div>\n        <div class=\"subtitle\">\"SANSKRUTI PRIDE\"</div>\n        <div style=\"text-align: center; font-size: 10px; margin-top: 4px\">\n          Sur. No.726, FP-27/1, TP-415, Nr. Raslila Party Plot Kathwada,\n          Ahmedabad:382430\n        </div>\n\n        <div\n          style=\"\n            text-align: center;\n            margin-top: 10px;\n            font-weight: 700;\n            font-size: 16px;\n          \"\n        >\n          \"RECEIPT\"\n        </div>\n\n        <div class=\"box\">\n          <table style=\"width: 100%\">\n            <tr>\n              <td style=\"font-weight: 700\">Receipt No.: {{ receipt_no }}</td>\n              <td style=\"text-align: right; font-weight: 700\">\n                Date: {{ date }}\n              </td>\n            </tr>\n          </table>\n\n          <div class=\"desc\">\n           Received with thanks, from <b class=\"form_data\">{{ name }}</b>  ,towards booking of\n            <b class=\"form_data\">{{ plot }}</b> of Project - Sanskruti Pride with sums of Rs.\n            <b class=\"form_data\">{{ amount_formatted }}</b>/- (In words: <b>Rupees {{ amount_words }} only</b>) by\n            <b>{{ payment_mode }}</b> \n            {{#if (ne payment_mode \"Cash\")}}\n            drawn on Bank: <b class=\"form_data\">{{ bank }}</b> Branch:\n            <b class=\"form_data\">{{ branch }}</b> through <b>{{ payment_mode }}</b> No.\n            <b>{{ cheque_no }}.</b>\n              {{else}}\n              .\n            {{/if}}\n          </div>\n          <br />\n          <div>Summary to Amount received as above towards</div>\n\n          <table style=\"width: 100%\">\n            <tr class=\"no-break-row\">\n              <!-- Table with amounts -->\n              <td>\n                <table class=\"summary\">\n                  <tr>\n                    <th>Particulars</th>\n                    <th>Amount Rs.</th>\n                  </tr>\n                  <tr>\n                    <td>Sales Consideration</td>\n                    <td class=\"right-align\">{{ sales_amount_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Extra Work</td>\n                    <td class=\"right-align\">{{ extra_work_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Other Receipts</td>\n                    <td class=\"right-align\">{{ other_receipts_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td style=\"font-weight: 700\">Total Amount</td>\n                    <td style=\"font-weight: 700\" class=\"right-align\">\n                      {{ total_amount_formatted }}\n                    </td>\n                  </tr>\n                </table>\n              </td>\n              <td class=\"signature-box\">\n                For, KP ENTERPRISE\n                <div class=\"signature-frame\"></div>\n                Authorized Signatory / Partner\n              </td>\n            </tr>\n          </table>\n          <br>\n          <b>Amount in Words: Rupees {{ amount_words }} only</b>\n\n          <div style=\"clear: both\"></div>\n        </div>\n\n        <footer>\n          <div>\n            1) Subject to realisation of Cheque / NEFT / RTGS / Online payments\n          </div>\n          <div>2) Subject to Ahmedabad Jurisdiction</div>\n          <div>GST Reg. No.: 24AAYFK8118R1ZA</div>\n          <div>\n            RERA Reg.No.: PR/GJ/AHMEDABAD/AHMEDABAD CITY/AUDA/MAA12405/101023\n          </div>\n        </footer>\n      </div>\n    </div>\n  </body>\n</html>\n`;\n\nconst formatNumber = (num: number) => new Intl.NumberFormat('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(num);\n\nconst formatDate = (dateString: string) => {\n    try {\n        const [year, month, day] = dateString.split('-');\n        if (!year || !month || !day) return dateString;\n        return `${day}-${month}-${year}`;\n    } catch (e) {\n        return dateString;\n    }\n};\n\nHandlebars.registerHelper('ne', function (a, b) {\n  return a !== b;\n});\n\nexport async function generatePdfAction(formData: any) {\n  try {\n    const template = Handlebars.compile(receiptTemplateHtml);\n\n    const total = Number(formData.amount) || 0;\n    const salesAmount = Number(formData.sales_amount) || 0;\n    const extraWork = Number(formData.extra_work) || 0;\n    const otherReceipts = Number(formData.other_receipts) || 0;\n    \n    const integerPart = Math.floor(total);\n    const decimalPart = Math.round((total - integerPart) * 100);\n\n    let finalWords = amountToWords(integerPart);\n    if (decimalPart > 0) {\n      finalWords += ' and ' + amountToWords(decimalPart) + ' paise';\n    }\n\n\n    const templateData = {\n        ...formData,\n        date: formatDate(formData.date),\n        amount_formatted: formatNumber(total),\n        amount_words: finalWords.replace(/\\b\\w/g, (l: string) => l.toUpperCase()),\n        sales_amount_formatted: formatNumber(salesAmount),\n        extra_work_formatted: extraWork === 0 ? '-' : formatNumber(extraWork),\n        other_receipts_formatted: otherReceipts === 0 ? '-' : formatNumber(otherReceipts),\n        total_amount_formatted: formatNumber(total),\n    };\n\n    const html = template(templateData);\n    \n    return { success: true, data: html };\n  } catch (error: any) {\n    console.error('HTML generation failed:', error);\n    return { success: false, error: `Failed to generate HTML: ${error.message}` };\n  }\n}\n\nconst CSV_FILE_PATH = path.join(os.tmpdir(), 'receipt_log.csv');\nconst CSV_HEADERS = [\n    'receipt_no', 'date', 'name', 'plot',\n    'payment_mode', 'bank', 'branch', 'cheque_no',\n    'sales_amount', 'extra_work', 'other_receipts', 'amount'\n];\n\nfunction sanitizeCsvValue(value: any): string {\n    const str = String(value ?? '');\n    if (str.includes(',') || str.includes('\"') || str.includes('\\n')) {\n        return `\"${str.replace(/\"/g, '\"\"')}\"`;\n    }\n    return str;\n}\n\nexport async function recordToCsvAction(formData: any) {\n  try {\n    const csvRow = CSV_HEADERS.map(header => sanitizeCsvValue(formData[header])).join(',');\n\n    try {\n      // Check if file exists, if not, create it with a header\n      await fs.access(CSV_FILE_PATH);\n    } catch {\n      const headerRow = CSV_HEADERS.join(',');\n      await fs.writeFile(CSV_FILE_PATH, headerRow + '\\n', 'utf-8');\n    }\n\n    // Append new row\n    await fs.appendFile(CSV_FILE_PATH, csvRow + '\\n', 'utf-8');\n    \n    return { success: true };\n  } catch (error: any) {\n    console.error('CSV writing failed:', error);\n    return { success: false, error: `Failed to write to CSV: ${error.message}` };\n  }\n}\n\n\nexport async function downloadCsvAction() {\n    try {\n        await fs.access(CSV_FILE_PATH);\n        const fileContent = await fs.readFile(CSV_FILE_PATH, 'utf-8');\n        return { success: true, data: fileContent };\n    } catch (error: any) {\n        if (error.code === 'ENOENT') {\n            return { success: false, error: \"Log file does not exist yet. Please generate a receipt first.\" };\n        }\n        console.error('CSV reading failed:', error);\n        return { success: false, error: `Failed to read CSV file: ${error.message}` };\n    }\n}\n"],"names":[],"mappings":";;;;;;IAuXsB,oBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\n'use server';\n\nimport Handlebars from 'handlebars';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport os from 'os';\n\n// Custom function to convert number to words in Indian format\nconst amountToWords = (amount: number): string => {\n  const ones = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];\n  const teens = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];\n  const tens = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];\n\n  const convertLessThanThousand = (num: number): string => {\n    if (num === 0) return '';\n    if (num < 10) return ones[num];\n    if (num < 20) return teens[num - 10];\n    if (num < 100) return tens[Math.floor(num / 10)] + (num % 10 !== 0 ? ' ' + ones[num % 10] : '');\n    return ones[Math.floor(num / 100)] + ' hundred' + (num % 100 !== 0 ? ' ' + convertLessThanThousand(num % 100) : '');\n  };\n\n  if (amount === 0) return 'Zero';\n\n  const crores = Math.floor(amount / 10000000);\n  const lakhs = Math.floor((amount % 10000000) / 100000);\n  const thousands = Math.floor((amount % 100000) / 1000);\n  const hundreds = Math.floor(amount % 1000);\n\n  let words = '';\n  if (crores > 0) words += convertLessThanThousand(crores) + ' crore ';\n  if (lakhs > 0) words += convertLessThanThousand(lakhs) + ' lakh ';\n  if (thousands > 0) words += convertLessThanThousand(thousands) + ' thousand ';\n  if (hundreds > 0) words += convertLessThanThousand(hundreds);\n\n  return words.trim().replace(/\\s+/g, ' ');\n};\n\n\nconst receiptTemplateHtml = `<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Receipt</title>\n    <style>\n  @page {\n    size: A4;\n    margin: 20px; /* Reduced page margin */\n  }\n  body {\n    font-family: Arial, sans-serif;\n    font-size: 11px; /* Slightly smaller font for better fit */\n    color: #000;\n  }\n  /* --- Layout & Spacing --- */\n  .receipt-container {\n      page-break-inside: avoid;\n  }\n  .receipt {\n    page-break-inside: avoid;\n    padding-bottom: 10px;\n  }\n  .receipt.original {\n    border-bottom: 2px dashed #000;\n    margin-bottom: 10px; /* Reduced space between receipts */\n  }\n  .box {\n    border: 1px solid #000;\n    padding: 10px;\n    margin-top: 8px;\n  }\n  header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 5px;\n  }\n  footer {\n    margin-top: 15px; /* Reduced footer margin */\n    font-size: 9px;\n    line-height: 1.4;\n  }\n  /* --- Typography --- */\n  header .right {\n    font-weight: bold;\n  }\n  .title {\n    text-align: center;\n    font-size: 18px;\n    font-weight: 700;\n    margin-top: 5px;\n  }\n  .subtitle {\n    text-align: center;\n    font-size: 13px;\n    margin-top: 2px;\n  }\n  .desc {\n    margin-top: 8px;\n    line-height: 1.5;\n    text-align: left; /* Use left-align to avoid bad spacing */\n  }\n  /* --- Tables & Signature --- */\n  .summary-container {\n    width: 100%;\n    margin-top: 5px;\n  }\n  .summary {\n    border-collapse: collapse;\n  }\n  .summary th,\n  .summary td {\n    border: 1px solid #000;\n    padding: 5px; /* Reduced cell padding */\n    text-align: left;\n  }\n  .summary th {\n    background: #f2f2f2;\n    font-weight: 700;\n  }\n  .right-align {\n    text-align: right;\n  }\n  .signature-box {\n    text-align: center;\n    vertical-align: top;\n    padding-left: 20px;\n  }\n  .signature-frame {\n    border: 1px solid black;\n    width: 120px;\n    height: 50px;\n    margin: 5px auto;\n  }\n  .logo img {\n    width: 130px;\n  }\n</style>\n  </head>\n  <body>\n    <div class=\"receipt-container\">\n      <!-- ORIGINAL -->\n      <div class=\"content receipt original\">\n        <header>\n          <div class=\"logo\">\n            <img src=\"/logo.png\" alt=\"logo\" />\n          </div>\n          <div class=\"right\">Original</div>\n        </header>\n\n        <div class=\"title\">KP ENTERPRISE</div>\n        <div class=\"subtitle\">\"SANSKRUTI PRIDE\"</div>\n        <div style=\"text-align: center; font-size: 10px; margin-top: 4px\">\n          Sur. No.726, FP-27/1, TP-415, Nr. Raslila Party Plot Kathwada,\n          Ahmedabad:382430\n        </div>\n\n        <div\n          style=\"\n            text-align: center;\n            margin-top: 10px;\n            font-weight: 700;\n            font-size: 16px;\n          \"\n        >\n          \"RECEIPT\"\n        </div>\n\n        <div class=\"box\">\n          <table style=\"width: 100%\">\n            <tr>\n              <td style=\"font-weight: 700\">Receipt No.: {{ receipt_no }}</td>\n              <td style=\"text-align: right; font-weight: 700\">\n                Date: {{ date }}\n              </td>\n            </tr>\n          </table>\n\n          <div class=\"desc\">\n            Received with thanks, from <b class=\"form_data\">{{ name }}</b>  ,towards booking of\n            <b class=\"form_data\">{{ plot }}</b> of Project - Sanskruti Pride with sums of Rs.\n            <b class=\"form_data\">{{ amount_formatted }}</b>/- (In words:<b>Rupees {{ amount_words }} only</b>) by\n            <b>{{ payment_mode }}</b> \n            {{#if (ne payment_mode \"Cash\")}}\n            drawn on Bank: <b class=\"form_data\">{{ bank }}</b> Branch:\n            <b class=\"form_data\">{{ branch }}</b> through <b>{{ payment_mode }}</b> No.\n            <b>{{ cheque_no }}.</b>\n              {{else}}\n              .\n            {{/if}}\n          </div>\n          <br />\n          <div>Summary to Amount received as above towards</div>\n\n          <table style=\"width: 100%\">\n            <tr class=\"no-break-row\">\n              <!-- Table with amounts -->\n              <td>\n                <table class=\"summary\">\n                  <tr>\n                    <th>Particulars</th>\n                    <th>Amount Rs.</th>\n                  </tr>\n                  <tr>\n                    <td>Sales Consideration</td>\n                    <td class=\"right-align\">{{ sales_amount_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Extra Work</td>\n                    <td class=\"right-align\">{{ extra_work_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Other Receipts</td>\n                    <td class=\"right-align\">{{ other_receipts_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td style=\"font-weight: 700\">Total Amount</td>\n                    <td style=\"font-weight: 700\" class=\"right-align\">\n                      {{ total_amount_formatted }}\n                    </td>\n                  </tr>\n                </table>\n              </td>\n              <td class=\"signature-box\">\n                For, KP ENTERPRISE\n                <div class=\"signature-frame\"></div>\n                Authorized Signatory / Partner\n              </td>\n            </tr>\n          </table>\n          <br>\n          <b><u>Amount in Words: Rupees {{ amount_words }} only</u></b>\n\n          <div style=\"clear: both\"></div>\n        </div>\n\n        <footer>\n          <div>\n            1) Subject to realisation of Cheque / NEFT / RTGS / Online payments\n          </div>\n          <div>2) Subject to Ahmedabad Jurisdiction</div>\n          <div>GST Reg. No.: 24AAYFK8118R1ZA</div>\n          <div>\n            RERA Reg.No.: PR/GJ/AHMEDABAD/AHMEDABAD CITY/AUDA/MAA12405/101023\n          </div>\n        </footer>\n      </div>\n\n      <!-- DUPLICATE -->\n      <div class=\"content receipt\">\n        <header>\n          <div class=\"logo\">\n            <img src=\"/logo.png\" alt=\"logo\" />\n          </div>\n          <div class=\"right\">Duplicate</div>\n        </header>\n\n        <div class=\"title\">KP ENTERPRISE</div>\n        <div class=\"subtitle\">\"SANSKRUTI PRIDE\"</div>\n        <div style=\"text-align: center; font-size: 10px; margin-top: 4px\">\n          Sur. No.726, FP-27/1, TP-415, Nr. Raslila Party Plot Kathwada,\n          Ahmedabad:382430\n        </div>\n\n        <div\n          style=\"\n            text-align: center;\n            margin-top: 10px;\n            font-weight: 700;\n            font-size: 16px;\n          \"\n        >\n          \"RECEIPT\"\n        </div>\n\n        <div class=\"box\">\n          <table style=\"width: 100%\">\n            <tr>\n              <td style=\"font-weight: 700\">Receipt No.: {{ receipt_no }}</td>\n              <td style=\"text-align: right; font-weight: 700\">\n                Date: {{ date }}\n              </td>\n            </tr>\n          </table>\n\n          <div class=\"desc\">\n           Received with thanks, from <b class=\"form_data\">{{ name }}</b>  ,towards booking of\n            <b class=\"form_data\">{{ plot }}</b> of Project - Sanskruti Pride with sums of Rs.\n            <b class=\"form_data\">{{ amount_formatted }}</b>/- (In words: <b>Rupees {{ amount_words }} only</b>) by\n            <b>{{ payment_mode }}</b> \n            {{#if (ne payment_mode \"Cash\")}}\n            drawn on Bank: <b class=\"form_data\">{{ bank }}</b> Branch:\n            <b class=\"form_data\">{{ branch }}</b> through <b>{{ payment_mode }}</b> No.\n            <b>{{ cheque_no }}.</b>\n              {{else}}\n              .\n            {{/if}}\n          </div>\n          <br />\n          <div>Summary to Amount received as above towards</div>\n\n          <table style=\"width: 100%\">\n            <tr class=\"no-break-row\">\n              <!-- Table with amounts -->\n              <td>\n                <table class=\"summary\">\n                  <tr>\n                    <th>Particulars</th>\n                    <th>Amount Rs.</th>\n                  </tr>\n                  <tr>\n                    <td>Sales Consideration</td>\n                    <td class=\"right-align\">{{ sales_amount_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Extra Work</td>\n                    <td class=\"right-align\">{{ extra_work_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td>Other Receipts</td>\n                    <td class=\"right-align\">{{ other_receipts_formatted }}</td>\n                  </tr>\n                  <tr>\n                    <td style=\"font-weight: 700\">Total Amount</td>\n                    <td style=\"font-weight: 700\" class=\"right-align\">\n                      {{ total_amount_formatted }}\n                    </td>\n                  </tr>\n                </table>\n              </td>\n              <td class=\"signature-box\">\n                For, KP ENTERPRISE\n                <div class=\"signature-frame\"></div>\n                Authorized Signatory / Partner\n              </td>\n            </tr>\n          </table>\n          <br>\n          <b>Amount in Words: Rupees {{ amount_words }} only</b>\n\n          <div style=\"clear: both\"></div>\n        </div>\n\n        <footer>\n          <div>\n            1) Subject to realisation of Cheque / NEFT / RTGS / Online payments\n          </div>\n          <div>2) Subject to Ahmedabad Jurisdiction</div>\n          <div>GST Reg. No.: 24AAYFK8118R1ZA</div>\n          <div>\n            RERA Reg.No.: PR/GJ/AHMEDABAD/AHMEDABAD CITY/AUDA/MAA12405/101023\n          </div>\n        </footer>\n      </div>\n    </div>\n  </body>\n</html>\n`;\n\nconst formatNumber = (num: number) => new Intl.NumberFormat('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(num);\n\nconst formatDate = (dateString: string) => {\n    try {\n        const [year, month, day] = dateString.split('-');\n        if (!year || !month || !day) return dateString;\n        return `${day}-${month}-${year}`;\n    } catch (e) {\n        return dateString;\n    }\n};\n\nHandlebars.registerHelper('ne', function (a, b) {\n  return a !== b;\n});\n\nexport async function generatePdfAction(formData: any) {\n  try {\n    const template = Handlebars.compile(receiptTemplateHtml);\n\n    const total = Number(formData.amount) || 0;\n    const salesAmount = Number(formData.sales_amount) || 0;\n    const extraWork = Number(formData.extra_work) || 0;\n    const otherReceipts = Number(formData.other_receipts) || 0;\n    \n    const integerPart = Math.floor(total);\n    const decimalPart = Math.round((total - integerPart) * 100);\n\n    let finalWords = amountToWords(integerPart);\n    if (decimalPart > 0) {\n      finalWords += ' and ' + amountToWords(decimalPart) + ' paise';\n    }\n\n\n    const templateData = {\n        ...formData,\n        date: formatDate(formData.date),\n        amount_formatted: formatNumber(total),\n        amount_words: finalWords.replace(/\\b\\w/g, (l: string) => l.toUpperCase()),\n        sales_amount_formatted: formatNumber(salesAmount),\n        extra_work_formatted: extraWork === 0 ? '-' : formatNumber(extraWork),\n        other_receipts_formatted: otherReceipts === 0 ? '-' : formatNumber(otherReceipts),\n        total_amount_formatted: formatNumber(total),\n    };\n\n    const html = template(templateData);\n    \n    return { success: true, data: html };\n  } catch (error: any) {\n    console.error('HTML generation failed:', error);\n    return { success: false, error: `Failed to generate HTML: ${error.message}` };\n  }\n}\n\nconst CSV_FILE_PATH = path.join(os.tmpdir(), 'receipt_log.csv');\nconst CSV_HEADERS = [\n    'receipt_no', 'date', 'name', 'plot',\n    'payment_mode', 'bank', 'branch', 'cheque_no',\n    'sales_amount', 'extra_work', 'other_receipts', 'amount'\n];\n\nfunction sanitizeCsvValue(value: any): string {\n    const str = String(value ?? '');\n    if (str.includes(',') || str.includes('\"') || str.includes('\\n')) {\n        return `\"${str.replace(/\"/g, '\"\"')}\"`;\n    }\n    return str;\n}\n\nexport async function recordToCsvAction(formData: any) {\n  try {\n    const csvRow = CSV_HEADERS.map(header => sanitizeCsvValue(formData[header])).join(',');\n\n    try {\n      // Check if file exists, if not, create it with a header\n      await fs.access(CSV_FILE_PATH);\n    } catch {\n      const headerRow = CSV_HEADERS.join(',');\n      await fs.writeFile(CSV_FILE_PATH, headerRow + '\\n', 'utf-8');\n    }\n\n    // Append new row\n    await fs.appendFile(CSV_FILE_PATH, csvRow + '\\n', 'utf-8');\n    \n    return { success: true };\n  } catch (error: any) {\n    console.error('CSV writing failed:', error);\n    return { success: false, error: `Failed to write to CSV: ${error.message}` };\n  }\n}\n\n\nexport async function downloadCsvAction() {\n    try {\n        await fs.access(CSV_FILE_PATH);\n        const fileContent = await fs.readFile(CSV_FILE_PATH, 'utf-8');\n        return { success: true, data: fileContent };\n    } catch (error: any) {\n        if (error.code === 'ENOENT') {\n            return { success: false, error: \"Log file does not exist yet. Please generate a receipt first.\" };\n        }\n        console.error('CSV reading failed:', error);\n        return { success: false, error: `Failed to read CSV file: ${error.message}` };\n    }\n}\n"],"names":[],"mappings":";;;;;;IA4asB,oBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 609, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 641, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 794, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ledger-flow/ledger-flow-client.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\nimport { Printer, Loader2 } from 'lucide-react';\nimport { format } from 'date-fns';\n\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useToast } from '@/hooks/use-toast';\nimport { generatePdfAction, recordToCsvAction } from '@/app/actions';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { cn } from '@/lib/utils';\nimport { useConfig } from '@/hooks/use-config';\n\nconst numericString = (schema: z.ZodString) =>\n  schema.regex(/^\\d*\\.?\\d*$/, \"Only numbers are allowed.\");\n\nconst formSchema = z.object({\n  receipt_no: z.string().min(1, \"Receipt number is required.\"),\n  date: z.string().min(1, \"Date is required.\"),\n  name: z.string().min(1, \"Recipient name is required.\"),\n  plot_type: z.string(),\n  plot_number: z.string().min(1, \"Number is required.\"),\n  plot: z.string().optional(),\n  payment_mode: z.string(),\n  other_payment_mode: z.string().optional(),\n  bank: z.string().optional(),\n  branch: z.string().optional(),\n  cheque_no: z.string().optional(),\n  sales_amount: numericString(z.string()).min(1, \"Sales amount is required.\"),\n  extra_work: numericString(z.string()).optional(),\n  other_receipts: numericString(z.string()).optional(),\n  amount: z.coerce.number(),\n}).refine((data) => {\n    if (data.payment_mode === 'Cash') return true;\n    return !!data.cheque_no;\n}, {\n    message: \"Cheque / Transaction No is required.\",\n    path: [\"cheque_no\"],\n}).refine((data) => {\n    if (data.payment_mode === 'Cash') return true;\n    return !!data.bank;\n}, {\n    message: \"Bank Name is required.\",\n    path: [\"bank\"],\n}).refine((data) => {\n    if (data.payment_mode === 'Cash') return true;\n    return !!data.branch;\n}, {\n    message: \"Branch is required.\",\n    path: [\"branch\"],\n});\n\nexport function LedgerFlowClient() {\n  const [config] = useConfig();\n  const { toast } = useToast();\n  const [status, setStatus] = useState<'idle' | 'generating' | 'error'>('idle');\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    mode: 'onChange',\n    defaultValues: {\n      receipt_no: '',\n      date: format(new Date(), 'yyyy-MM-dd'),\n      name: '',\n      plot_type: 'Flat No.',\n      plot_number: '',\n      payment_mode: 'Cheque',\n      bank: '',\n      branch: '',\n      cheque_no: '',\n      sales_amount: \"0\",\n      extra_work: \"0\",\n      other_receipts: \"0\",\n      amount: 0,\n    },\n  });\n\n  const { watch, setValue, formState: { isValid } } = form;\n\n  const paymentMode = watch('payment_mode');\n  const salesAmount = watch('sales_amount');\n  const extraWork = watch('extra_work');\n  const otherReceipts = watch('other_receipts');\n  const plotType = watch('plot_type');\n  const plotNumber = watch('plot_number');\n\n  useEffect(() => {\n    const sales = Number(salesAmount) || 0;\n    const extra = Number(extraWork) || 0;\n    const others = Number(otherReceipts) || 0;\n    setValue('amount', sales + extra + others);\n  }, [salesAmount, extraWork, otherReceipts, setValue]);\n\n  useEffect(() => {\n    setValue('plot', `${plotType} ${plotNumber}`);\n  }, [plotType, plotNumber, setValue]);\n\n  const onSubmit = async (values: z.infer<typeof formSchema>) => {\n    setStatus('generating');\n\n    const finalValues = { ...values };\n    if (values.payment_mode === 'Other') {\n        finalValues.payment_mode = values.other_payment_mode || 'Other';\n    }\n\n    const result = await generatePdfAction(finalValues);\n    \n    if (result.success && result.data) {\n        // Record to CSV\n        const csvResult = await recordToCsvAction(finalValues);\n        if (!csvResult.success) {\n            console.error(\"Failed to record to CSV:\", csvResult.error);\n            toast({ variant: \"destructive\", title: \"CSV Write Error\", description: \"Could not save the record to the log file.\" });\n        }\n\n        try {\n            // Open Print Dialog\n            const printWindow = window.open('', '_blank');\n            if (printWindow) {\n                printWindow.document.write(result.data);\n                printWindow.document.close();\n                printWindow.onload = () => {\n                    printWindow.focus();\n                    printWindow.print();\n                };\n            } else {\n                toast({ variant: \"destructive\", title: \"Print Error\", description: \"Could not open print window. Please disable your pop-up blocker.\" });\n            }\n            setStatus('idle');\n        } catch (e: any) {\n            setStatus('error');\n            toast({ variant: \"destructive\", title: \"Action Error\", description: `There was an issue triggering the print dialog: ${e.message}` });\n        }\n    } else {\n        setStatus('error');\n        toast({ variant: \"destructive\", title: \"HTML Generation Failed\", description: result.error });\n    }\n  };\n  \n  const isLoading = status === 'generating';\n\n  return (\n    <div className=\"flex justify-center items-start min-h-screen py-10\">\n    <Form {...form}>\n      <form\n        onSubmit={form.handleSubmit(onSubmit)}\n        className=\"w-full max-w-2xl bg-card p-10 rounded-xl shadow-lg border border-foreground/20\"\n        style={{ borderWidth: `${config.borderWidth}px` }}\n        >\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-primary mb-2\">KP ENTERPRISE</h1>\n          <p className=\"text-muted-foreground\">Receipt Data Entry</p>\n        </div>\n\n        <fieldset className=\"mb-6\">\n          <legend className=\"text-lg font-semibold text-primary w-full border-b pb-2 mb-4\">Recipient &amp; Property Details</legend>\n          <FormField control={form.control} name=\"receipt_no\" render={({ field }) => (\n            <FormItem className=\"mb-4\"><FormLabel>Receipt No:</FormLabel><FormControl><Input {...field} /></FormControl><FormMessage /></FormItem>\n          )} />\n          <FormField control={form.control} name=\"date\" render={({ field }) => (\n            <FormItem className=\"mb-4\"><FormLabel>Date:</FormLabel><FormControl><Input type=\"date\" {...field} /></FormControl><FormMessage /></FormItem>\n          )} />\n          <FormField control={form.control} name=\"name\" render={({ field }) => (\n            <FormItem className=\"mb-4\"><FormLabel>Received From (Name):</FormLabel><FormControl><Input {...field} /></FormControl><FormMessage /></FormItem>\n          )} />\n          <div className=\"grid grid-cols-2 gap-4\">\n            <FormField control={form.control} name=\"plot_type\" render={({ field }) => (\n              <FormItem><FormLabel>Type:</FormLabel>\n                <Select onValueChange={field.onChange} defaultValue={field.value}>\n                  <FormControl><SelectTrigger><SelectValue /></SelectTrigger></FormControl>\n                  <SelectContent><SelectItem value=\"Flat No.\">Flat No.</SelectItem><SelectItem value=\"Shop No.\">Shop No.</SelectItem></SelectContent>\n                </Select><FormMessage />\n              </FormItem>\n            )} />\n            <FormField control={form.control} name=\"plot_number\" render={({ field }) => (\n                <FormItem><FormLabel>Number:</FormLabel><FormControl><Input placeholder=\"e.g., 303\" {...field} /></FormControl><FormMessage /></FormItem>\n            )} />\n          </div>\n        </fieldset>\n\n        <fieldset className=\"mb-6\">\n          <legend className=\"text-lg font-semibold text-primary w-full border-b pb-2 mb-4\">Payment Information</legend>\n          <FormField control={form.control} name=\"payment_mode\" render={({ field }) => (\n            <FormItem className=\"mb-4\"><FormLabel>Payment Mode:</FormLabel>\n              <Select onValueChange={field.onChange} defaultValue={field.value}>\n                <FormControl><SelectTrigger><SelectValue /></SelectTrigger></FormControl>\n                <SelectContent>\n                  <SelectItem value=\"Cheque\">Cheque</SelectItem><SelectItem value=\"Cash\">Cash</SelectItem>\n                  <SelectItem value=\"NEFT\">NEFT</SelectItem><SelectItem value=\"UPI\">UPI</SelectItem>\n                  <SelectItem value=\"Other\">Other...</SelectItem>\n                </SelectContent>\n              </Select><FormMessage />\n            </FormItem>\n          )} />\n          {paymentMode === 'Other' && (\n            <FormField control={form.control} name=\"other_payment_mode\" render={({ field }) => (\n              <FormItem className=\"mb-4\"><FormLabel>Custom Payment Mode:</FormLabel><FormControl><Input {...field} /></FormControl><FormMessage /></FormItem>\n            )} />\n          )}\n          <FormField control={form.control} name=\"bank\" render={({ field }) => (\n            <FormItem className=\"mb-4\">\n              <FormLabel>Bank Name: {paymentMode === 'Cash' && '(Optional)'}</FormLabel>\n              <FormControl><Input {...field} disabled={paymentMode === 'Cash'} /></FormControl>\n              <FormMessage />\n            </FormItem>\n          )} />\n          <FormField control={form.control} name=\"branch\" render={({ field }) => (\n            <FormItem className=\"mb-4\">\n              <FormLabel>Branch: {paymentMode === 'Cash' && '(Optional)'}</FormLabel>\n              <FormControl><Input {...field} disabled={paymentMode === 'Cash'} /></FormControl>\n              <FormMessage />\n            </FormItem>\n          )} />\n          <FormField control={form.control} name=\"cheque_no\" render={({ field }) => (\n            <FormItem className=\"mb-4\">\n              <FormLabel>Cheque / Transaction No: {paymentMode === 'Cash' && '(Optional)'}</FormLabel>\n              <FormControl><Input {...field} disabled={paymentMode === 'Cash'} /></FormControl>\n              <FormMessage />\n            </FormItem>\n          )} />\n        </fieldset>\n\n        <fieldset>\n          <legend className=\"text-lg font-semibold text-primary w-full border-b pb-2 mb-4\">Amount Breakdown</legend>\n          <FormField control={form.control} name=\"sales_amount\" render={({ field }) => (\n            <FormItem className=\"mb-4\"><FormLabel>Sales Amount:</FormLabel><FormControl><Input type=\"text\" placeholder=\"0.00\" {...field} /></FormControl><FormMessage /></FormItem>\n          )} />\n          <FormField control={form.control} name=\"extra_work\" render={({ field }) => (\n            <FormItem className=\"mb-4\"><FormLabel>Extra Work:</FormLabel><FormControl><Input type=\"text\" placeholder=\"0.00\" {...field} /></FormControl><FormMessage /></FormItem>\n          )} />\n          <FormField control={form.control} name=\"other_receipts\" render={({ field }) => (\n            <FormItem className=\"mb-4\"><FormLabel>Other Receipts:</FormLabel><FormControl><Input type=\"text\" placeholder=\"0.00\" {...field} /></FormControl><FormMessage /></FormItem>\n          )} />\n          <FormField control={form.control} name=\"amount\" render={({ field }) => (\n            <FormItem><FormLabel>Total Amount (auto-calculated):</FormLabel><FormControl><Input type=\"number\" {...field} readOnly className=\"bg-muted\" /></FormControl><FormMessage /></FormItem>\n          )} />\n        </fieldset>\n        \n        <Button type=\"submit\" className=\"w-full mt-8\" disabled={isLoading || !isValid}>\n            <span\n                className={cn(\n                    \"relative z-10 flex items-center justify-center gap-2\",\n                    \"w-full h-full\",\n                    \"transition-transform duration-100 ease-in-out\",\n                    \"active:translate-y-px\"\n                )}\n            >\n              {isLoading ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Printer className=\"mr-2 h-4 w-4\" />}\n              Generate & Print Receipt\n          </span>\n        </Button>\n      </form>\n    </Form>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAhBA;;;;;;;;;;;;;;;;AAkBA,MAAM,gBAAgB,CAAC,SACrB,OAAO,KAAK,CAAC,eAAe;AAE9B,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,EAAE;IAC1B,YAAY,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,GAAG,CAAC,GAAG;IAC9B,MAAM,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,GAAG,CAAC,GAAG;IACxB,MAAM,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,GAAG,CAAC,GAAG;IACxB,WAAW,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD;IAClB,aAAa,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,GAAG,CAAC,GAAG;IAC/B,MAAM,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,QAAQ;IACzB,cAAc,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD;IACrB,oBAAoB,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,QAAQ;IACvC,MAAM,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,QAAQ;IACzB,QAAQ,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,QAAQ;IAC3B,WAAW,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,IAAI,QAAQ;IAC9B,cAAc,cAAc,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,KAAK,GAAG,CAAC,GAAG;IAC/C,YAAY,cAAc,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,KAAK,QAAQ;IAC9C,gBAAgB,cAAc,CAAA,GAAA,oIAAA,CAAA,SAAQ,AAAD,KAAK,QAAQ;IAClD,QAAQ,oIAAA,CAAA,SAAQ,CAAC,MAAM;AACzB,GAAG,MAAM,CAAC,CAAC;IACP,IAAI,KAAK,YAAY,KAAK,QAAQ,OAAO;IACzC,OAAO,CAAC,CAAC,KAAK,SAAS;AAC3B,GAAG;IACC,SAAS;IACT,MAAM;QAAC;KAAY;AACvB,GAAG,MAAM,CAAC,CAAC;IACP,IAAI,KAAK,YAAY,KAAK,QAAQ,OAAO;IACzC,OAAO,CAAC,CAAC,KAAK,IAAI;AACtB,GAAG;IACC,SAAS;IACT,MAAM;QAAC;KAAO;AAClB,GAAG,MAAM,CAAC,CAAC;IACP,IAAI,KAAK,YAAY,KAAK,QAAQ,OAAO;IACzC,OAAO,CAAC,CAAC,KAAK,MAAM;AACxB,GAAG;IACC,SAAS;IACT,MAAM;QAAC;KAAS;AACpB;AAEO,SAAS;IACd,MAAM,CAAC,OAAO,GAAG,CAAA,GAAA,6HAAA,CAAA,YAAS,AAAD;IACzB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmC;IAEtE,MAAM,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAA8B;QAC/C,UAAU,CAAA,GAAA,8JAAA,CAAA,cAAW,AAAD,EAAE;QACtB,MAAM;QACN,eAAe;YACb,YAAY;YACZ,MAAM,CAAA,GAAA,sJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,QAAQ;YACzB,MAAM;YACN,WAAW;YACX,aAAa;YACb,cAAc;YACd,MAAM;YACN,QAAQ;YACR,WAAW;YACX,cAAc;YACd,YAAY;YACZ,gBAAgB;YAChB,QAAQ;QACV;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,EAAE,EAAE,GAAG;IAEpD,MAAM,cAAc,MAAM;IAC1B,MAAM,cAAc,MAAM;IAC1B,MAAM,YAAY,MAAM;IACxB,MAAM,gBAAgB,MAAM;IAC5B,MAAM,WAAW,MAAM;IACvB,MAAM,aAAa,MAAM;IAEzB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,OAAO,gBAAgB;QACrC,MAAM,QAAQ,OAAO,cAAc;QACnC,MAAM,SAAS,OAAO,kBAAkB;QACxC,SAAS,UAAU,QAAQ,QAAQ;IACrC,GAAG;QAAC;QAAa;QAAW;QAAe;KAAS;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,SAAS,QAAQ,GAAG,SAAS,CAAC,EAAE,YAAY;IAC9C,GAAG;QAAC;QAAU;QAAY;KAAS;IAEnC,MAAM,WAAW,OAAO;QACtB,UAAU;QAEV,MAAM,cAAc;YAAE,GAAG,MAAM;QAAC;QAChC,IAAI,OAAO,YAAY,KAAK,SAAS;YACjC,YAAY,YAAY,GAAG,OAAO,kBAAkB,IAAI;QAC5D;QAEA,MAAM,SAAS,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE;QAEvC,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;YAC/B,gBAAgB;YAChB,MAAM,YAAY,MAAM,CAAA,GAAA,kJAAA,CAAA,oBAAiB,AAAD,EAAE;YAC1C,IAAI,CAAC,UAAU,OAAO,EAAE;gBACpB,QAAQ,KAAK,CAAC,4BAA4B,UAAU,KAAK;gBACzD,MAAM;oBAAE,SAAS;oBAAe,OAAO;oBAAmB,aAAa;gBAA6C;YACxH;YAEA,IAAI;gBACA,oBAAoB;gBACpB,MAAM,cAAc,OAAO,IAAI,CAAC,IAAI;gBACpC,IAAI,aAAa;oBACb,YAAY,QAAQ,CAAC,KAAK,CAAC,OAAO,IAAI;oBACtC,YAAY,QAAQ,CAAC,KAAK;oBAC1B,YAAY,MAAM,GAAG;wBACjB,YAAY,KAAK;wBACjB,YAAY,KAAK;oBACrB;gBACJ,OAAO;oBACH,MAAM;wBAAE,SAAS;wBAAe,OAAO;wBAAe,aAAa;oBAAmE;gBAC1I;gBACA,UAAU;YACd,EAAE,OAAO,GAAQ;gBACb,UAAU;gBACV,MAAM;oBAAE,SAAS;oBAAe,OAAO;oBAAgB,aAAa,CAAC,gDAAgD,EAAE,EAAE,OAAO,EAAE;gBAAC;YACvI;QACJ,OAAO;YACH,UAAU;YACV,MAAM;gBAAE,SAAS;gBAAe,OAAO;gBAA0B,aAAa,OAAO,KAAK;YAAC;QAC/F;IACF;IAEA,MAAM,YAAY,WAAW;IAE7B,qBACE,8OAAC;QAAI,WAAU;kBACf,cAAA,8OAAC,gIAAA,CAAA,OAAI;YAAE,GAAG,IAAI;sBACZ,cAAA,8OAAC;gBACC,UAAU,KAAK,YAAY,CAAC;gBAC5B,WAAU;gBACV,OAAO;oBAAE,aAAa,GAAG,OAAO,WAAW,CAAC,EAAE,CAAC;gBAAC;;kCAEhD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAuC;;;;;;0CACrD,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAGvC,8OAAC;wBAAS,WAAU;;0CAClB,8OAAC;gCAAO,WAAU;0CAA+D;;;;;;0CACjF,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAa,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACpE,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAAuB,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAE,GAAG,KAAK;;;;;;;;;;;0DAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAE1H,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAO,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC9D,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAAiB,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAC,MAAK;oDAAQ,GAAG,KAAK;;;;;;;;;;;0DAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAEhI,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAO,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC9D,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAAiC,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAE,GAAG,KAAK;;;;;;;;;;;0DAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAEpI,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,gIAAA,CAAA,YAAS;wCAAC,SAAS,KAAK,OAAO;wCAAE,MAAK;wCAAY,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACnE,8OAAC,gIAAA,CAAA,WAAQ;;kEAAC,8OAAC,gIAAA,CAAA,YAAS;kEAAC;;;;;;kEACnB,8OAAC,kIAAA,CAAA,SAAM;wDAAC,eAAe,MAAM,QAAQ;wDAAE,cAAc,MAAM,KAAK;;0EAC9D,8OAAC,gIAAA,CAAA,cAAW;0EAAC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;8EAAC,cAAA,8OAAC,kIAAA,CAAA,cAAW;;;;;;;;;;;;;;;0EACxC,8OAAC,kIAAA,CAAA,gBAAa;;kFAAC,8OAAC,kIAAA,CAAA,aAAU;wEAAC,OAAM;kFAAW;;;;;;kFAAqB,8OAAC,kIAAA,CAAA,aAAU;wEAAC,OAAM;kFAAW;;;;;;;;;;;;;;;;;;kEACvF,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;kDAGzB,8OAAC,gIAAA,CAAA,YAAS;wCAAC,SAAS,KAAK,OAAO;wCAAE,MAAK;wCAAc,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACnE,8OAAC,gIAAA,CAAA,WAAQ;;kEAAC,8OAAC,gIAAA,CAAA,YAAS;kEAAC;;;;;;kEAAmB,8OAAC,gIAAA,CAAA,cAAW;kEAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;4DAAC,aAAY;4DAAa,GAAG,KAAK;;;;;;;;;;;kEAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAKnI,8OAAC;wBAAS,WAAU;;0CAClB,8OAAC;gCAAO,WAAU;0CAA+D;;;;;;0CACjF,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAe,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACtE,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DACpC,8OAAC,kIAAA,CAAA,SAAM;gDAAC,eAAe,MAAM,QAAQ;gDAAE,cAAc,MAAM,KAAK;;kEAC9D,8OAAC,gIAAA,CAAA,cAAW;kEAAC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;sEAAC,cAAA,8OAAC,kIAAA,CAAA,cAAW;;;;;;;;;;;;;;;kEACxC,8OAAC,kIAAA,CAAA,gBAAa;;0EACZ,8OAAC,kIAAA,CAAA,aAAU;gEAAC,OAAM;0EAAS;;;;;;0EAAmB,8OAAC,kIAAA,CAAA,aAAU;gEAAC,OAAM;0EAAO;;;;;;0EACvE,8OAAC,kIAAA,CAAA,aAAU;gEAAC,OAAM;0EAAO;;;;;;0EAAiB,8OAAC,kIAAA,CAAA,aAAU;gEAAC,OAAM;0EAAM;;;;;;0EAClE,8OAAC,kIAAA,CAAA,aAAU;gEAAC,OAAM;0EAAQ;;;;;;;;;;;;;;;;;;0DAErB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;4BAGxB,gBAAgB,yBACf,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAqB,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC5E,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAAgC,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAE,GAAG,KAAK;;;;;;;;;;;0DAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAGrI,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAO,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC9D,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAClB,8OAAC,gIAAA,CAAA,YAAS;;oDAAC;oDAAY,gBAAgB,UAAU;;;;;;;0DACjD,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAE,GAAG,KAAK;oDAAE,UAAU,gBAAgB;;;;;;;;;;;0DACzD,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAGhB,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAS,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChE,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAClB,8OAAC,gIAAA,CAAA,YAAS;;oDAAC;oDAAS,gBAAgB,UAAU;;;;;;;0DAC9C,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAE,GAAG,KAAK;oDAAE,UAAU,gBAAgB;;;;;;;;;;;0DACzD,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAGhB,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAY,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACnE,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAClB,8OAAC,gIAAA,CAAA,YAAS;;oDAAC;oDAA0B,gBAAgB,UAAU;;;;;;;0DAC/D,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAE,GAAG,KAAK;oDAAE,UAAU,gBAAgB;;;;;;;;;;;0DACzD,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;;;;;;;kCAKlB,8OAAC;;0CACC,8OAAC;gCAAO,WAAU;0CAA+D;;;;;;0CACjF,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAe,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACtE,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAAyB,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAC,MAAK;oDAAO,aAAY;oDAAQ,GAAG,KAAK;;;;;;;;;;;0DAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAE3J,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAa,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACpE,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAAuB,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAC,MAAK;oDAAO,aAAY;oDAAQ,GAAG,KAAK;;;;;;;;;;;0DAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAEzJ,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAiB,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACxE,8OAAC,gIAAA,CAAA,WAAQ;wCAAC,WAAU;;0DAAO,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAA2B,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAC,MAAK;oDAAO,aAAY;oDAAQ,GAAG,KAAK;;;;;;;;;;;0DAAkB,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;0CAE7J,8OAAC,gIAAA,CAAA,YAAS;gCAAC,SAAS,KAAK,OAAO;gCAAE,MAAK;gCAAS,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChE,8OAAC,gIAAA,CAAA,WAAQ;;0DAAC,8OAAC,gIAAA,CAAA,YAAS;0DAAC;;;;;;0DAA2C,8OAAC,gIAAA,CAAA,cAAW;0DAAC,cAAA,8OAAC,iIAAA,CAAA,QAAK;oDAAC,MAAK;oDAAU,GAAG,KAAK;oDAAE,QAAQ;oDAAC,WAAU;;;;;;;;;;;0DAA2B,8OAAC,gIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;;;;;;;kCAI3K,8OAAC,kIAAA,CAAA,SAAM;wBAAC,MAAK;wBAAS,WAAU;wBAAc,UAAU,aAAa,CAAC;kCAClE,cAAA,8OAAC;4BACG,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACR,wDACA,iBACA,iDACA;;gCAGL,0BAAY,8OAAC,iNAAA,CAAA,UAAO;oCAAC,WAAU;;;;;yDAAiC,8OAAC,wMAAA,CAAA,UAAO;oCAAC,WAAU;;;;;;gCAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpH","debugId":null}},
    {"offset": {"line": 1834, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/slider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;0BAET,8OAAC,kKAAA,CAAA,QAAqB;gBAAC,WAAU;0BAC/B,cAAA,8OAAC,kKAAA,CAAA,QAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,8OAAC,kKAAA,CAAA,QAAqB;gBAAC,WAAU;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAoB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1886, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/theme-customizer.tsx"],"sourcesContent":["\n'use client';\n\nimport { useTheme } from 'next-themes';\nimport { Moon, Sun } from 'lucide-react';\nimport { useConfig } from '@/hooks/use-config';\nimport { Button } from '@/components/ui/button';\nimport { Label } from './ui/label';\nimport { Slider } from './ui/slider';\n\nexport function ThemeCustomizer() {\n  const [config, setConfig] = useConfig();\n  const { setTheme: setMode, resolvedTheme: mode } = useTheme();\n\n  return (\n    <div className=\"p-4 space-y-6\">\n       <div className=\"space-y-4\">\n        <Label className=\"text-base\">Accent Color</Label>\n        <div className=\"flex items-center space-x-2\">\n           <input\n            type=\"color\"\n            value={config.accentColor || '#000000'}\n            onChange={(e) =>\n              setConfig({ ...config, accentColor: e.target.value })\n            }\n            className=\"w-12 h-10 rounded-lg border p-1\"\n          />\n          <span className=\"text-sm text-muted-foreground\">Custom</span>\n        </div>\n      </div>\n      \n      <div className=\"space-y-4\">\n        <Label className=\"text-base\">Font</Label>\n        <div className=\"grid grid-cols-2 gap-2\">\n          <Button\n            variant={config.font === 'inter' ? 'default' : 'outline'}\n            onClick={() => setConfig({ ...config, font: 'inter' })}\n          >\n            Inter\n          </Button>\n           <Button\n            variant={config.font === 'poppins' ? 'default' : 'outline'}\n            onClick={() => setConfig({ ...config, font: 'poppins' })}\n          >\n            Poppins\n          </Button>\n          <Button\n            variant={config.font === 'literata' ? 'default' : 'outline'}\n            onClick={() => setConfig({ ...config, font: 'literata' })}\n          >\n            Literata\n          </Button>\n           <Button\n            variant={config.font === 'source-serif' ? 'default' : 'outline'}\n            onClick={() => setConfig({ ...config, font: 'source-serif' })}\n          >\n            Source Serif\n          </Button>\n        </div>\n      </div>\n      \n      <div className=\"space-y-4\">\n        <Label className=\"text-base\">Border Thickness</Label>\n        <Slider\n          min={0}\n          max={10}\n          step={1}\n          value={[config.borderWidth ?? 1]}\n          onValueChange={(value) => setConfig({ ...config, borderWidth: value[0] })}\n        />\n        <div className=\"text-sm text-muted-foreground text-center\">\n          {config.borderWidth ?? 1}px\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        <Label className=\"text-base\">Mode</Label>\n        <div className=\"grid grid-cols-2 gap-2\">\n          <Button\n            variant={mode === 'light' ? 'default' : 'outline'}\n            onClick={() => setMode('light')}\n          >\n            <Sun className=\"mr-2\" /> Light\n          </Button>\n          <Button\n            variant={mode === 'dark' ? 'default' : 'outline'}\n            onClick={() => setMode('dark')}\n          >\n            <Moon className=\"mr-2\" /> Dark\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6HAAA,CAAA,YAAS,AAAD;IACpC,MAAM,EAAE,UAAU,OAAO,EAAE,eAAe,IAAI,EAAE,GAAG,CAAA,GAAA,gJAAA,CAAA,WAAQ,AAAD;IAE1D,qBACE,8OAAC;QAAI,WAAU;;0BACZ,8OAAC;gBAAI,WAAU;;kCACd,8OAAC,iIAAA,CAAA,QAAK;wBAAC,WAAU;kCAAY;;;;;;kCAC7B,8OAAC;wBAAI,WAAU;;0CACZ,8OAAC;gCACA,MAAK;gCACL,OAAO,OAAO,WAAW,IAAI;gCAC7B,UAAU,CAAC,IACT,UAAU;wCAAE,GAAG,MAAM;wCAAE,aAAa,EAAE,MAAM,CAAC,KAAK;oCAAC;gCAErD,WAAU;;;;;;0CAEZ,8OAAC;gCAAK,WAAU;0CAAgC;;;;;;;;;;;;;;;;;;0BAIpD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,iIAAA,CAAA,QAAK;wBAAC,WAAU;kCAAY;;;;;;kCAC7B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAS,OAAO,IAAI,KAAK,UAAU,YAAY;gCAC/C,SAAS,IAAM,UAAU;wCAAE,GAAG,MAAM;wCAAE,MAAM;oCAAQ;0CACrD;;;;;;0CAGA,8OAAC,kIAAA,CAAA,SAAM;gCACN,SAAS,OAAO,IAAI,KAAK,YAAY,YAAY;gCACjD,SAAS,IAAM,UAAU;wCAAE,GAAG,MAAM;wCAAE,MAAM;oCAAU;0CACvD;;;;;;0CAGD,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAS,OAAO,IAAI,KAAK,aAAa,YAAY;gCAClD,SAAS,IAAM,UAAU;wCAAE,GAAG,MAAM;wCAAE,MAAM;oCAAW;0CACxD;;;;;;0CAGA,8OAAC,kIAAA,CAAA,SAAM;gCACN,SAAS,OAAO,IAAI,KAAK,iBAAiB,YAAY;gCACtD,SAAS,IAAM,UAAU;wCAAE,GAAG,MAAM;wCAAE,MAAM;oCAAe;0CAC5D;;;;;;;;;;;;;;;;;;0BAML,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,iIAAA,CAAA,QAAK;wBAAC,WAAU;kCAAY;;;;;;kCAC7B,8OAAC,kIAAA,CAAA,SAAM;wBACL,KAAK;wBACL,KAAK;wBACL,MAAM;wBACN,OAAO;4BAAC,OAAO,WAAW,IAAI;yBAAE;wBAChC,eAAe,CAAC,QAAU,UAAU;gCAAE,GAAG,MAAM;gCAAE,aAAa,KAAK,CAAC,EAAE;4BAAC;;;;;;kCAEzE,8OAAC;wBAAI,WAAU;;4BACZ,OAAO,WAAW,IAAI;4BAAE;;;;;;;;;;;;;0BAI7B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,iIAAA,CAAA,QAAK;wBAAC,WAAU;kCAAY;;;;;;kCAC7B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAS,SAAS,UAAU,YAAY;gCACxC,SAAS,IAAM,QAAQ;;kDAEvB,8OAAC,gMAAA,CAAA,MAAG;wCAAC,WAAU;;;;;;oCAAS;;;;;;;0CAE1B,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAS,SAAS,SAAS,YAAY;gCACvC,SAAS,IAAM,QAAQ;;kDAEvB,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAS;;;;;;;;;;;;;;;;;;;;;;;;;AAMrC","debugId":null}},
    {"offset": {"line": 2151, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/moving-border-button.tsx"],"sourcesContent":["\n\"use client\"\n\nimport { cn } from \"@/lib/utils\";\nimport React from \"react\";\n\nexport function MovingBorderButton({\n  children,\n  className,\n  ...props\n}: React.PropsWithChildren<React.ButtonHTMLAttributes<HTMLButtonElement>>) {\n  return (\n    <button\n      className={cn(\n        \"bg-transparent relative p-0.5 rounded-full\",\n        className\n      )}\n      style={{\n        WebkitAppearance: \"none\",\n        appearance: \"none\",\n      }}\n      {...props}\n    >\n      <span\n        className={cn(\n          \"relative z-10 flex items-center justify-center gap-2\",\n          \"h-12 w-12 rounded-full bg-foreground px-4 py-2 text-background\",\n          \"transition-transform duration-100 ease-in-out\",\n          \"active:translate-y-px\"\n        )}\n      >\n        {children}\n      </span>\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAFA;;;AAKO,SAAS,mBAAmB,EACjC,QAAQ,EACR,SAAS,EACT,GAAG,OACoE;IACvE,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8CACA;QAEF,OAAO;YACL,kBAAkB;YAClB,YAAY;QACd;QACC,GAAG,KAAK;kBAET,cAAA,8OAAC;YACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,wDACA,kEACA,iDACA;sBAGD;;;;;;;;;;;AAIT","debugId":null}},
    {"offset": {"line": 2187, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { Palette } from 'lucide-react';\nimport { Sheet, SheetContent, SheetDescription, SheetHeader, SheetTitle, SheetTrigger } from '@/components/ui/sheet';\nimport { Header } from '@/components/ledger-flow/header';\nimport { LedgerFlowClient } from '@/components/ledger-flow/ledger-flow-client';\nimport { ThemeCustomizer } from '@/components/theme-customizer';\nimport { MovingBorderButton } from '@/components/ui/moving-border-button';\n\nexport default function Home() {\n  return (\n    <div className=\"flex flex-col min-h-screen bg-background\">\n      <Header />\n      <main className=\"flex-1 container mx-auto\">\n        <LedgerFlowClient />\n      </main>\n      <div className=\"fixed bottom-6 right-6 z-50\">\n        <Sheet>\n          <SheetTrigger asChild>\n            <MovingBorderButton>\n              <Palette />\n            </MovingBorderButton>\n          </SheetTrigger>\n          <SheetContent className=\"w-[320px] sm:w-[400px]\">\n            <SheetHeader>\n              <SheetTitle>Customize Theme</SheetTitle>\n              <SheetDescription>\n                Pick a color palette and font to personalize the application's appearance.\n              </SheetDescription>\n            </SheetHeader>\n            <ThemeCustomizer />\n          </SheetContent>\n        </Sheet>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,8IAAA,CAAA,SAAM;;;;;0BACP,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,gKAAA,CAAA,mBAAgB;;;;;;;;;;0BAEnB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,iIAAA,CAAA,QAAK;;sCACJ,8OAAC,iIAAA,CAAA,eAAY;4BAAC,OAAO;sCACnB,cAAA,8OAAC,sJAAA,CAAA,qBAAkB;0CACjB,cAAA,8OAAC,wMAAA,CAAA,UAAO;;;;;;;;;;;;;;;sCAGZ,8OAAC,iIAAA,CAAA,eAAY;4BAAC,WAAU;;8CACtB,8OAAC,iIAAA,CAAA,cAAW;;sDACV,8OAAC,iIAAA,CAAA,aAAU;sDAAC;;;;;;sDACZ,8OAAC,iIAAA,CAAA,mBAAgB;sDAAC;;;;;;;;;;;;8CAIpB,8OAAC,yIAAA,CAAA,kBAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5B","debugId":null}}]
}